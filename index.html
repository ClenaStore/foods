<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Clena Foods • Cardápio & Pedidos</title>
  <meta name="description" content="Cardápio responsivo com complementos, carrinho, login WhatsApp+senha e pagamento PIX QR Code. Integração total com Google Sheets." />

  <!-- Ícones e fontes -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>

  <style>
    :root{
      --bg:#0e0f12; --panel:#15171c; --soft:#1d1f26; --line:#292c36;
      --brand:#e63946; --accent:#ff8f1f; --txt:#f7f8fa; --muted:#cbd5e1;
      --ok:#22c55e; --bad:#ef4444; --warn:#f59e0b;
      --shadow:0 8px 22px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;font-family:Inter,system-ui,sans-serif;background:var(--bg);color:var(--txt)}

    header{position:sticky;top:0;z-index:50;background:rgba(20,22,27,.9);backdrop-filter:blur(12px);border-bottom:1px solid var(--line)}
    .wrap{max-width:1100px;margin:0 auto;padding:12px;display:flex;align-items:center;gap:12px}
    .brand img{width:32px;height:32px;border-radius:50%}
    .brand .t1{font-weight:800;font-size:14px}
    .brand .t2{font-size:11px;color:var(--muted)}
    nav{margin-left:auto;display:none;gap:6px}
    nav button{padding:8px 10px;border-radius:10px;border:0;background:var(--soft);color:var(--txt)}
    nav button.active{background:#2a2f3a}

    .page{max-width:1100px;margin:16px auto;padding:0 12px}
    .cards{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:12px}
    .card{background:var(--panel);border:1px solid var(--line);border-radius:14px;overflow:hidden;box-shadow:var(--shadow)}
    .card .img{aspect-ratio:4/3}
    .card .img img{width:100%;height:100%;object-fit:cover}
    .card .body{padding:10px}
    .card .name{font-weight:700;font-size:14px}
    .price{font-weight:800;color:#fcd34d;font-size:13px}
    .btn{padding:8px 10px;border-radius:10px;border:0;cursor:pointer;font-size:13px;font-weight:600;background:linear-gradient(180deg,#f97316,#ea580c);color:#fff}
    .btn.secondary{background:#2a2f3a}
    .btn.ghost{background:transparent;border:1px solid var(--line);color:var(--muted)}

    .toolbar{display:flex;flex-direction:column;gap:10px;margin-bottom:12px}
    .search{display:flex;gap:6px}
    .search input{flex:1;padding:10px;border-radius:10px;background:#0f1115;border:1px solid var(--line);color:var(--txt)}
    .chipz{display:flex;gap:6px;flex-wrap:wrap}
    .chip{padding:6px 10px;border-radius:99px;background:var(--soft);font-size:12px}
    .chip.active{background:#2a2f3a}

    .layout{display:flex;flex-direction:column;gap:14px}
    @media(min-width:768px){.layout{display:grid;grid-template-columns:1fr 320px;gap:14px} nav{display:flex}}

    .cart{background:var(--panel);border:1px solid var(--line);border-radius:14px;padding:12px}
    .cart h3{margin:6px 0;font-size:16px}
    .cart .row{display:flex;justify-content:space-between;align-items:center;font-size:13px;padding:6px 0;border-bottom:1px dashed #333}
    .cart .qty{display:flex;align-items:center;gap:6px}
    .cart .qty button{width:24px;height:24px;border-radius:8px;background:#0f1115;border:1px solid var(--line);color:var(--txt)}

    /* Tabbar mobile fixa */
    .tabbar{position:fixed;bottom:0;left:0;right:0;z-index:60;background:#15171c;border-top:1px solid var(--line);display:grid;grid-template-columns:repeat(4,1fr)}
    .tabbar button{padding:8px 4px;font-size:12px;color:var(--muted);background:none;border:0;display:flex;flex-direction:column;align-items:center}
    .tabbar button.active{color:#fff}
    body{padding-bottom:64px}

    .grid2{display:grid;grid-template-columns:1fr;gap:10px}
    @media(min-width:600px){.grid2{grid-template-columns:1fr 1fr}}
    .block{background:var(--panel);border:1px solid var(--line);border-radius:12px;padding:12px;box-shadow:var(--shadow)}
    .input{width:100%;padding:10px;border-radius:10px;background:#0f1115;border:1px solid var(--line);color:var(--txt)}

    footer{margin:28px 0 18px;text-align:center;color:var(--muted);font-size:12px}
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <div class="brand">
        <img src="https://images.unsplash.com/photo-1544027993-37dbfe43562a?q=80&w=120&auto=format&fit=crop" alt="logo">
        <div>
          <div class="t1">CLENA FOODS</div>
          <div class="t2">Hamburgueria • Delivery & Retirada</div>
        </div>
      </div>
      <nav>
        <button data-page="menu" class="active" onclick="showPage('menu')"><i class="fa-solid fa-burger"></i> Cardápio</button>
        <button data-page="complementos" onclick="showPage('complementos')"><i class="fa-solid fa-plus"></i> Extras</button>
        <button data-page="pedidos" onclick="showPage('pedidos')"><i class="fa-solid fa-bag-shopping"></i> Pedidos</button>
        <button data-page="perfil" onclick="showPage('perfil')"><i class="fa-solid fa-user"></i> Perfil</button>
      </nav>
    </div>
  </header>

  <!-- Tabbar mobile -->
  <div class="tabbar">
    <button data-page="menu" class="active" onclick="showPage('menu')"><i class="fa-solid fa-burger"></i><span>Cardápio</span></button>
    <button data-page="complementos" onclick="showPage('complementos')"><i class="fa-solid fa-plus"></i><span>Extras</span></button>
    <button data-page="pedidos" onclick="showPage('pedidos')"><i class="fa-solid fa-bag-shopping"></i><span>Pedidos</span></button>
    <button data-page="perfil" onclick="showPage('perfil')"><i class="fa-solid fa-user"></i><span>Perfil</span></button>
  </div>

  <!-- Páginas -->
  <section class="page" id="page-menu">… (cardápio igual ao anterior) …</section>
  <section class="page hidden" id="page-complementos">…</section>
  <section class="page hidden" id="page-pedidos">…</section>
  <section class="page hidden" id="page-perfil">…</section>

  <footer>© <span id="yy"></span> Clena Foods • Todos os direitos reservados</footer>

  <script>
    const API_URL = 'https://script.google.com/macros/s/SEU_WEBAPP_AQUI/exec';

    function showPage(id){
      document.querySelectorAll('nav button, .tabbar button').forEach(b=> b.classList.toggle('active', b.dataset.page===id));
      ['menu','complementos','pedidos','perfil'].forEach(p=>{
        const el=document.getElementById('page-'+p);
        if(el) el.classList.toggle('hidden', p!==id);
      });
    }
    document.getElementById('yy').textContent=new Date().getFullYear();
  </script>
</body>
</html>

<!-- ========================= BACKEND GAS =============================== -->
<script type="text/plain" id="GAS-example">
function doPost(e){
  const dados = JSON.parse(e.postData.contents||'{}');
  const acao = dados.acao; const token = dados.token||'';
  const ss = SpreadsheetApp.openById('SHEET_ID_AQUI');
  const db = o=> ss.getSheetByName(o);
  const json = o=> ContentService.createTextOutput(JSON.stringify(o)).setMimeType(ContentService.MimeType.JSON);
  const ok = (payload={})=> json({ok:true, ...payload});
  const bad = (m)=> json({ok:false, error:String(m||'Erro')});

  try{
    if(acao==='signup'){
      const u = dados;
      const id = 'U'+Date.now();
      // grava whatsapp + senha hash na planilha
      const hash = Utilities.base64Encode(Utilities.computeDigest(Utilities.DigestAlgorithm.SHA_256, u.senha));
      db('clientes').appendRow([id,u.nome,u.whatsapp,u.email,hash,u.cpf,u.nasc,new Date()]);
      return ok();
    }
    if(acao==='login'){
      const vals = db('clientes').getDataRange().getValues(); vals.shift();
      const hash = Utilities.base64Encode(Utilities.computeDigest(Utilities.DigestAlgorithm.SHA_256, dados.senha));
      const row = vals.find(r=> String(r[2])===String(dados.whatsapp) && String(r[4])===hash);
      if(!row) return bad('Credenciais inválidas');
      return ok({user:{id:row[0], nome:row[1], whatsapp:row[2], email:row[3]}, token:Utilities.getUuid()});
    }
    // … demais ações iguais (getMenu, getComplements, listOrders, createOrder etc) …
  }catch(err){ return bad(err.message) }
  return bad('Ação inválida');
}
</script>
